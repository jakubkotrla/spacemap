\chapter{Uživatelská dokumentace}

Model prostorové mapy popsaný v kapitole \ref{chapter-model} jsme implementovali v prototypové aplikace v jazyku Python.
Aplikace je na pøiloženém CD vèetnì dalších knihoven nutných pro její bìh.
Aplikace byla vyvíjena na MS Windows Vista a otestována na Linux Gentoo\footnote{Je tøeba mít knihovny \texttt{dev-python/imaging} a \texttt{dev-python/pwm} zkompilované s podporou \texttt{Tk}.}.
Pøi vývoji aplikace byl kladen dùraz na implementaci popsaného modelu a obsáhlost výstupních dat za cenu menšího pohodlí ovládání aplikace.
Rychlost aplikace závisí pøedevším na poètu uzlù prostorové mapy. Ve svìtech s vìtším poètem uzlù trvá 1 krok simulace pøibližnì 1 sekundu\footnote{Na PC 2.4GHz 4GB RAM, Windows Vista.}.
\\

\section{Instalace}
Nejdøíve je tøeba nainstalovat potøebné knihovny:
\begin{CompactItemize}
\item interpetor jazyka Python 
\item grafická PIL\footnote{Python Imaging Library}
\item knihovna NumPy\footnote{pro nástroj \texttt{plotter.py}\label{fn:repeat}} a Matplotlib\footref{fn:repeat}
\item .Net Framework 3.5\footnote{pro nástroj \texttt{statter.exe}}
\end{CompactItemize}


Tyto knihovny jsou na pøiloženém CD.
Aplikaci je pak nutné zkopírovat na pevný disk.
\\

\section{Ovládání aplikace}
Aplikace se spouští hlavním souborem \texttt{mainGUI.py}, lze ji ovládat pomocí menu.
Menu \texttt{World} umožòuje zobrazit pøehled afordancí, typù pøedmìtù a pøedmìtù. Menu \texttt{Quit} ukonèí aplikaci.
Mùže pracovat ve dvou módech: interaktivním a testovacím.
\\

Interaktivní mód lze spustit vybráním jména testovacího svìta v položce menu \texttt{Start}.
Aplikace pak spustí simulaci jedné místnosti. Stav svìta, agenta a prostorové mapy, je zobrazen v oknì aplikace.
Simulaci je možné pozastavit (\texttt{Pause}), znovu spustit (\texttt{Resume}) a zrušit (\texttt{Stop}).
V prùbìhu simulace lze zobrazit informace o nìkterých objektech svìta a prostorové mapy:
kliknutí na pøedmìt èi uzel prostorové mapy se zobrazí malé okno s podrobnými údaji. Pro tyto úèely je vhodné simulaci pozastavit.
V prùbìhu aplikace ukládá data do adresáøe \texttt{../../exs}.
\\

Testovací mód lze spustím položkou \texttt{TestAll} menu \texttt{Start}.
Aplikace vytvoøí adresáø \texttt{../../tests/yyyy-mm-dd--hh-mm-ss/} a spustí postupnì vše\-chny dostupné testy.
Do tohoto adresáøe zkopíruje soubor \texttt{Global.py} -- své aktuální nastavení.
Pro každý testovaný svìt vytvoøí v tomto adresáøi podadresáø \texttt{/nazev-sveta} a do nìj ukládá data.
Stav svìta a prostorové mapy není zobrazen v oknì aplikace, ale je ukládán do souborù ve formátu PNG.
V oknì aplikace jsou zobrazeny jen základní informace o prùbìhu testu.
V tomto módu je aplikace optimalizována na výkon a nelze ji ukonèit pomocí menu \texttt{Quit}, je nutné ji zavøít klasickým tlaèítkem Windows: Close v pravém horním rohu aplikace.
\\


V obou módech jsou ukládána podrobná data do textových souborù. Tato data je možné pomocí nástrojù \texttt{statter.exe} a \texttt{plotter.py} vizualizovat.
Test devíti svìtù s 5000 kroky simulace mùže vygenerovat až 3GB dat.
Nastavení aplikace má dvì èásti:

\begin{description}
\item[nastavení parametrù modelu]  \hfill \\
  Soubor \texttt{Enviroment/Global.py}, obsahuje všechny parametry svìta, agenta a modelu prostorové mapy.
  Význam parametrù je uveden v komentáøích v souboru a v pøíloze B.
\item[urèení testovacích svìtù]  \hfill \\
  Soubor \texttt{Config/Config.py} a soubory svìtù v adresáøi \texttt{Config}, urèuje tvar místnosti, rozložení pøedmìtu a waypointù a scénáø agenta.
\end{description}




\section{Výstupní data a jejich vizualizace}

Výstupem aplikace jsou následující soubory:
\begin{description}
  \setlength{\leftmargin}{0.5cm}
  \setlength{\itemsep}{0pt}
  \setlength{\parsep}{0pt}
  \setlength{\topsep}{0pt}
\item[\texttt{PIL000000.png}--\texttt{PIL999999.png}]  \hfill \\
  obrázky stavu svìta a prostorové mapy v každém kroku simulace
\item[\texttt{visibilityobjectheatmap.png}] \hfill \\
  obrázek stavu v posledním kroku simulace vèetnì nauèenosti pøedmìtu
\item[\texttt{data-scenario.txt}] \hfill \\
  agentùv scénáø
\item[\texttt{data-nc.txt}] \hfill \\
  poèet uzlù
\item[\texttt{data-elnode-status.txt}] \hfill \\
  stav všech uzlù v každém kroku
\item[\texttt{data-place-status.txt}] \hfill \\
  stav všech míst v každém kroku
\item[\texttt{data-rememberinfo.txt}] \hfill \\
  chyba mapy pro každý objekt každý 10-tý krok  
\item[\texttt{data-elnodeheatmap.txt}] \hfill \\
  mapa rozložení uzlù po skonèení simulace s jejich naplnìností
\item[\texttt{data-elnodeheatmapag.txt}] \hfill \\
 mapa rozložení uzlù po skonèení simulace s jejich množstvím odpudivosti
\item[\texttt{data-objheatmap.txt}] \hfill \\
  mapa rozložení pøedmìtù po skonèení simulace s jejich nauèeností
\item[\texttt{log.txt}] \hfill \\
  podrobné informace o prùbìhu simulace  
\end{description}

Data v textových souborech je možné vizualizovat použitím nástrojù \texttt{statter.exe} a \texttt{plotter.py}.
Oba nástroje pracují tak, že po spuštìní projdou aktuální adresáø a rekurzivnì všechny podadresáøe a zpracují všechny nalezené soubory se správným jménem.
\\

Nástroj \texttt{statter.exe} spoèítá prùmìrné, minimální a maximální hodnoty dat o uzlech a místech a uloží je do dalších textových souborù.
Nástroj \texttt{plotter.py} na základì textových souborù vytvoøí grafy a uloží je do souborù ve formátu PNG.
\\