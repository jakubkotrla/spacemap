\section{Gravitaèní model}Inspirováni pouitím odpudivosti v pøedchozím modelu, rozhodli jsme se vytvoøit model zaloenı pouze na pøitalivosti a odpudivosti.Tedy uzly mapy jsou pøitahovány k pøemìtùm a zároveò se vzájemnì odpuzují. Obì síly berou v potaz naplnìnost uzlu.\\Model dále obsahuje myšlenku, e i kdy èlovìk vnímá pøedmìty v jeden okamik, ukládání do pamìti probíhá postupnì. Tato myšlenka je do modelu zapracována tak, e vjem je sice dodán prostorové mapì v jeden konkrétní krok simulace,ale mapa si jej uloí a uèí se dle nìj nìkolik následujících krokù.\\\subsection{Vytvoøení vrstvy uzlù}Na zaèátku simulace si agent vytvoøí ??prvotní?? prostorovou mapu, která neobsahuje ádné informace o pøedmìtech ani jejich rozloení ve svìtì.Obsahuje uzly, rozmístìné pouze dle geometrie místnosti. Jejich poèet a zpùsob rozloení je parametrizován.\\\begin{definition}[Poèáteèní odchylka mapy]Uzly mohou bıt umístìny zcela náhodnì èi pravidelnì ve ètvercové møíce s náhodnou odchylkou.Náhodná odchylka mùe bıt i nulová, èím je dosaeno pravidelného rozloení uzlù.Ukázky poèáteèního rozloení uzlù jsou na obrázku \ref{fig:createmap}.Ukázalo se, e tento parametr nemá vliv na rozloení uzlù po delší dobì simulace.\end{definition}\begin{figure}[h!]  \centering  \subfloat[Pravidelná møíka]{\label{fig:createmap-grid}\includegraphics[width=0.33\textwidth]{img/createmap/nodes-start-grid.eps}}  \subfloat[Pravidelná møíka s odchylkou 3]{\label{fig:createmap-noise3}\includegraphics[width=0.33\textwidth]{img/createmap/nodes-start-grid-noise-3.eps}}  \subfloat[Zcela náhodnì]{\label{fig:createmap-random}\includegraphics[width=0.33\textwidth]{img/createmap/nodes-start-random.eps}}  \caption{Poèáteèní rozloení uzlù. Další ukázky jsou na pøiloeném CD v adresáøi ??}  \label{fig:createmap}\end{figure}\begin{definition}[Hustota mapy]Poèet uzlù, které jsou do místnosti umístìny pøi vytváøení mapy je urèen pouze na základì její velikosti a hustoty mapy.Pokud je poèáteèní rozloení mapy pravidelná møíka, hustota mapy urèuje, jak daleko od sebe mají dva uzly bıt.Jeden uzel pak pokrıvá oblast velikosti ètverce hustoty.Pokud je rozloení uzlù zcela náhodné, je z hustoty mapy odvozen poèet uzlù dle vzorce \eqref{formula:el-start-pocet-uzlu},kde $obsah(mistnost)$ je obsah polygonu reprezentující místnost a $hustota$ je hustota mapy.\end{definition}\begin{equation} pocet = \frac{obsah(mistnost)}{hustota^2}\label{formula:el-start-pocet-uzlu}\end{equation}\\% STOPA VJEMU %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\subsection{Stopa vjemu}Gravitaèní model se uèí z vjemù postupnì.K tomu vyuívá tzv. \emph{stopy vjemu}.Pøedstavují urèitou míru pozornosti, kterou agent vìnuje jednomu pøedmìtu, krátkodobì uloenı vjem, kterı chvíli trvá a prostorovou mapu postupnì mìní.\\\begin{definition}[Stopa vjemu]Kdy je v urèitém kroku simulace prostorové mapì pøedán vjem ke zpracování, mapa si jej uloí a uèí se dle nìj nekolik dalších krokù simulace.Takto uloenı vjem budeme nazıvat stopou vjemu.Stopa vjemu je dvojice \emph{$<$pamìová stopa, intenzita$>$}, kde \emph{pamìová stopa}, je pamìová stopa pøedmìtu, kterı vjem vyvolal.Intenzita stopy vjemu je pøi jejím vytvoøení odvozena z intenzity vjemu a v prùbìhu èasu klesá.Intenzita urèuje míru, s jakou bude stopa vjemu ovlivòovat prostorovou mapu.\end{definition}\begin{definition}[Vliv vjemu]Pøi vytvoøení stopy vjemu je urèena její intenzita. Ta závisí na intenzitì pùvodního vjemu a tzv. vlivu vjemu.To je parametr modelu, kterı ovlivòuje rychlost uèení prostorové mapy. Budeme jej dále znaèit $\eta_0$.(EPCreateEnergy)\end{definition}Stopa vjemu postupnì slábne. Typicky bìhem nìkolika krokù simulace klesne její intenzita z poèáteèní hodnoty blízko k nule.Slábnutí stopy závisí na dvou parametrech: \emph{míøe slábnutí} a \emph{limitu zmizení}.\begin{definition}[Míra slabnutí]Míra slábnutí urèuje rychlost klesání intenzity. Ovlivòuje, jak dlouho je stopa vjemu uloena.(EPFadeCoef)\end{definition}\begin{definition}[Limit zmizení]Stopa vjemu zmizí, pokud její intenzita klesne pod urèitou hranici - limit zmizení.(EPFadeLimit)\end{definition}Zpracování pøíchozího vjemu je tedy pouze vytvoøení stopy vjemu s odkazem na pamìovou stopu.Pokud v daném místì ji stopa vjemu je, její intenzita je zvıšena. Poèáteèní intenzita stopy resp. zvıšení intenzity je dáno vzorcem:\begin{equation} \eta(stopa) = \eta_0 \times \eta(vjem)\label{formula:el-stopa-start-int}\end{equation}\begin{definition}[Dosah pøitalivosti]Parametr modelu dosah pøitalivosti urèuje, na jakou vzdálenost jsou pøitahovány uzly mapy k stopám vjemu. Vzdálenìjší uzly nejsou pøitahovány.(ELGravityRange)\end{definition}Jeden krok simulace stopy vjemu je popsán v algoritmu \ref{alg:stopa-step}. V jeho prvním kroku je zkonstruována mnoina okolních uzlù:\begin{equation} nodes_{around} = \{ n \in nodes ; dist(n, stopa) < dosah_{pritazlivost} \}\label{formula:el-okolni-uzly-g}\end{equation}\begin{algorithm}[h!]\caption{Jeden krok simulace pro stopu vjemu}\label{alg:stopa-step}\begin{algorithmic}[1]\State $nodes_{around} \gets$ všechny uzly v okolí stopy\ForAll{$node \in nodes_{around}$}	\State $node_{xy} \gets node_{xy} + \Delta_{xy}$ dle vzorce \eqref{formula:el-ep-gravitace} \label{alg:ep-step-gravitace}\EndFor\ForAll{$node \in nodes_{around}$}	\State $\Delta \eta \gets \eta(node, bod)$ dle vzorce \eqref{formula:el-intenzita} \label{alg:ep-step-intenzita}	\State zvıšení intenzity vazby mezi $node$ a pamìovou stopou pøedmìtu o $\Delta \eta$\EndFor\State $\eta(stopa) \gets \eta(stopa) \times$ EPFadeCoef\If{$\eta(stopa) <$ EPFadeLimit}	\State zmizení stopy vjemu\EndIf\end{algorithmic}\end{algorithm}Na øádku \ref{alg:ep-step-intenzita} je zvıšena intenzita vazby mezi uzlem a pamìovou stopu.Zvıšení je dáno podobnım vzorcem jako \eqref{formula:intenzita-vazby} s jedinım rozdílem, e místo vjemu se pracuje s jeho stopou:\begin{equation} \Delta \eta(node, bod) = \eta(stopa) \times \frac{ norm( dist(node, stopa) ) }{\sum_{n \in nodes_{around}}  norm( dist(n, stopa) )}\label{formula:el-intenzita}\end{equation}\\kde $nodes_{around}$ je mnoina všech uzlù v okolí stopy vjemu.Funkce $norm$ je libovolná klesající funkce mající obor hodnot $<0,1>$, napø. nepøímá úmìra $norm(x) = 1/max(1,x)$ èi Gaussova funkce.\\Na øádku \ref{alg:ep-step-gravitace} je pouita zmìna polohy uzlu $\Delta_{xy}$, je dána vzorcem:\begin{equation} \Delta_{xy}(node, stopa) = \frac{\eta(stopa)}{\eta_0} \times \frac{ sila_{pritazlivost} }{ dist(node, stopa)^2 \times \mu(node) }\label{formula:el-ep-gravitace}\end{equation}\\% ODPUDIVOST UZLU %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\subsection{Odpudivost uzlù}V kadém kroku simulace se uzly, které jsou pøíliš blízko u sebe, odpuzují.\begin{definition}[Dosah odpudivosti]Parametr modelu dosah odpudivosti urèuje, na jakou vzdálenost se uzly mapy ještì odpuzují. Vzdálenìjší uzly se neodpuzují.(ELAntigravityRange)\end{definition}\begin{definition}[Síla odpudivosti]Parametr modelu síla odudivosti urèuje, jak moc se uzly mapy odpuzují. Pùsobí jako opak síly pøitalivosti.(ELAntigravityRange)\end{definition}\begin{definition}[Vliv naplnìnosti]Parametr modelu vliv naplnìnosti urèuje, jak velkı vliv má naplnìnost uzlu na jeho odpudivost s ostatními uzly.(ELAGUsageCoef)\end{definition}\begin{definition}[Limit pohybu]Parametr modelu limit pohybu urèuje maximální monou zmìnu polohy uzlu v jednom kroku simulace.(MaxELNodeMove)\end{definition}Zmìna polohy uzlu kvùli odpudivosti je souèet odpudivıch sil okolních uzlù a je nepøímo úmìrná naplnìnosti uzlu.Nejdøíve jsou urèeny okolní uzly jako mnoina:\begin{equation} nodes_{around} = \{ n \in nodes ; dist(n, stopa) < dosah_{odpudivost} \}\label{formula:el-okolni-uzly-ag}\end{equation}Pro všechny okolní uzly je spoètena vzájemná odpudivost dle vzorce:\begin{equation} odpudivost(n_i, n_j) = \frac{ sila_{odpudivost} }{ dist'(n_i, n_j)^2 \times \mu'(n_i) \times \mu'(n_j) } \label{formula:el-odpudivost}\end{equation}kde\begin{equation} dist'(a,b) = max(1,dist(a,b))\end{equation}a\begin{equation} \mu'(node) = max(\mu_{vliv},\mu'(node))\end{equation} Funkce $max$ jsou pouity, aby zabránily dìlení nulou a sníily vliv vzdálenosti a naplnìnosti na odpudivost uzlù.\\Po urèení všech odpudivıch sil, které na uzly pùsobí, jsou polohy uzlù upraveny dle tìchto sil a jejich aktuální naplnìnosti:\begin{equation} \Delta_{xy}(node) = \frac{\sum_{\substack{   n \in nodes  }}  odpudivost(n, node)}{ max(1, \mu(node)) } \label{formula:el-odpudivost}\end{equation}\\Funkce $max$ je ve vzorci opìt pouita, aby zabránila dìlení nulou a pøíliš velkım zmìnám polohy uzlù pro $\mu(node) \to 0$.Pøesto je moné, e se v jednom kroku simulace nasèítají takové odpudivé a pøitalivé síly, e by zmìna polohy uzlu mohla pøesáhnout rozumnou mez.Nechceme, aby kvùli krátkodobım stavùm sítì \footnote{napø. pøi vytvoøení nového uzlu prostorové mapy} uzly pøíliš mìnily svou polohu.Pøidali jsme tedy omezení na maximální monı pohyb uzlu - parametr modelu \param{limit pohybu}.Alternativní øešení by bylo zmenšit parametr \param{síla odpudivosti} a \param{síla pøitalivosti} a provést více krokù simulace.To je však velmi nároèné na vıkon a vıše uvedené øešení toto vlastnì imituje.\\\subsection{Omezení pohybu uzlù}Následkem odpudivosti uzlù je moné, e se model bude snait pøesunout uzel mimo svìt, resp. vnì polygonu svìt reprezentující.V tom pøípadì je uzel na okraj svìta, tj. na hranu polygonu v místì jejího prùseèíku s úseèkou pøedstavující plánovanou trajektorií uzlu.Pokud se v dalších krocích simulace bude model opìt snait pøesunout uzel vnì polygonu, bude jeho trajektorie promítnuta na hranu polygonu, na které uzel leí.Uzel tak bude "klouzat" po hranì polygonu, jak je ukázáno na obrázku \ref{fig:slide-on-edge}.\\\begin{figure}[h]  \centering  \scalebox{0.8}{\includegraphics{img/slide-on-edge.ps}}  \caption{Zmìna posunu uzlu, kdy narazí na hranu polygonu}  \label{fig:slide-on-edge}\end{figure}% ZMENA POCTU UZLU %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\subsection{Zmìna poètu uzlù}Je ádoucí, aby se poèet uzlù prostorové mapy v prùbìhu simulace mìnil, dle poètu pøedmìtù, které agent vidìl resp. dle èetnosti a intenzity vjemù.Mapa tedy vytváøí nové uzly a zapomíná existující uzly. Nové uzly vytváøí stopy vjemu na základì jejich intenzity.Zapomínání uzlù se dìje v kadém kroku simulace resp. v kadém kroku simulace je urèitá pravdìpodobnost, e dojde k zapomenutí uzlu.\\\begin{definition}[Cena vytvoøení uzlu]Vytvoøení nového uzlu stojí urèité mnoství intenzity stopy vjemu. Toto mnoství budeme nazıvat cena vytvoøení uzlu a dále jej budeme znaèit $cost_{create}$.\end{definition}\begin{definition}[Odchylka vytvoøení uzlu]Parametr modelu \param{odchylka vytvoøení uzlu} urèuje, jak daleko od stopy vjemu mùe bıt novı uzel vytvoøen.Pokud bude roven nule, budou všechny uzly vytváøeny pøesnì v poloze stopy vjemu. To by vedlo k døíve uvedenım problémùm s vysokou odpudivostí.(ELNodeAddNoise)\end{definition}\begin{definition}[Poèáteèní naplnìnost uzlu]Parametr modelu, urèující poèáteèní naplnìnost uzlu. ??(MemObjIntenseToNewNode)\end{definition}Rozšíøili jsme jeden krok simulace pro stopu vjemu - algoritmus \ref{alg:stopa-step} - o vytváøení novıch uzlù, algoritmus \ref{alg:stopa-step-create}.\begin{algorithm}[h!]\caption{Vytváøení uzlù v rámci stopy vjemu}\label{alg:stopa-step-create}\begin{algorithmic}[1]\State $p_{create} \gets$ pravdìpodobnost vzniku nového uzlu daná vzorcem \eqref{formula:el-pst-node-create} \label{alg:ep-step-create}\State $r \gets$ náhodné èíslo $r \in <0,1>$\If{$r < p_{create}$}  \State vytvoøení nového uzlu  \State vytvoøení vazby uzlu na pamìovou stopu bodu energie  \State $\eta(stopa) \gets \eta(stopa) - cost_{create}$ \label{alg:ep-step-cost}\EndIf\end{algorithmic}\end{algorithm}Na øádku \ref{alg:ep-step-create} je pouita pravdìpodobnost vytvoøení nového uzlu, ta je dána vzorcem:\begin{equation} p_{create}(\eta(stopa), cost_{create}) = \frac{\eta(stopa) - cost_{create}}{cost_{create}}\label{formula:el-pst-node-create}\end{equation}\\Novì vytvoøenı uzel bude mít stejnou polohu jako stopa vjemu s náhodnou odchylkou \(\in <-\Delta,\Delta>\), kde $\Delta$ je \param{odchylka vytvoøení uzlu}.Jeho naplnìnost bude \param{poèáteèní naplnìnost uzlu}.\\\begin{definition}[Cena zapomenutí uzlu]Zapomenutí uzlu stojí urèité mnoství energii na zapomínání. Toto mnoství budeme nazıvat cena zapomenutí uzlu a dále jej budeme znaèit $cost_{forget}$.\end{definition}\begin{definition}[Míra zapomínání uzlù]Parametr modelu \param{míra zapomínání uzlù} urèuje jak rychle bude prostorová mapa zapomínat uzly.(ELForgetNodeRate)\end{definition}K zapomenutí mùe dojít kadı kroku simulace. Vrstva uzlù akumuluje tzv. energii na zapomínání $e_{forget}$.Na zaèátku je rovná nule a v prùbìhu simulace roste.V kadém kroku je zvıšena o hodnotu parametru \param{míra zapomínání uzlù}.Dále je urèena pravdìpodobnost, e bude zapomenut uzel $p_{forget}$:\begin{equation} p_{forget} = \frac{e_{forget} - cost_{delete}}{cost_{forget}}\label{formula:el-pst-forget}\end{equation}Pokud má dojít k zapomenutí uzlu, je vybrán náhodnı uzel a ten je odstranìn z prostorové mapy vèetnì všech jeho vazeb na pamìové stopy.Proces zapomínání uzlu je popsán algoritmem \ref{alg:node-forget}.\begin{algorithm}[h!]\caption{Zapomínání uzlù}\label{alg:node-forget}\begin{algorithmic}[1]\State $e_{forget} \gets e_{forget} + rate_{forget}$\State $p_{forget} \gets$ pravdìpodobnost zapomenutí uzlu daná vzorcem \eqref{formula:el-pst-forget} \label{alg:el-forget}\State $r \gets$ náhodné èíslo $r \in <0,1>$\If{$r < p_{forget}$}  \State $node \gets $ náhodnì vybranı uzel  \State $e_{forget} \gets e_{forget} - cost_{forget} \times norm(\mu(node)) $ \label{alg:el-forget-cost}  \State zapomenutí uzlu\EndIf\end{algorithmic}\end{algorithm}Kdy je z mapy odstranìn uzel, mùe dojít a typicky dochází k narušení nauèeného rovnomìrného rozloení uzlù v prostoru, smazanı uzel za sebou nechává prázdné místo.Èást prostorové mapy kolem smazaného uzlu by bylo vhodné pøeuèit, pøemistit uzly, aby byly opìt rovnomìrnì rozdìlené.Proto je pøi smazání uzlu provedeno nìkolik lokálních krokù simulace, kdy je provádìno pouze odpuzování uzlù v okolí smazaného uzlu.Tento proces má dva parametry: \param{poèet opakování} a \param{velikost okolí}.\\\begin{definition}[Poèet opakování]Parametr modelu \param{poèet opakování} urèuje poèet opakování lokálních krokù simulace.(ELDeleteNodeReTrainCount)\end{definition}\begin{definition}[Velikost okolí]Parametr modelu \param{velikost okolí} urèuje velikost okolí, tj. uzly, jejich poloha se mìní.(ELDeleteNodeReTrainRange)\end{definition}Vıše uvedenou cenu vytvoøení a zapomenutí uzlu mùeme urèit mnoha zpùsoby.První moností je konstantní cena v prùbìhu simulace.\begin{figure}[h!]  \centering  \subfloat[EmptyRoom]{\label{fig:nc-100-empty}\includegraphics[width=0.5\textwidth]{img/nc/100-empty.eps}}  \subfloat[FullRoom]{\label{fig:nc-100-full}\includegraphics[width=0.5\textwidth]{img/nc/100-full.eps}}  \caption{Test konstantní ceny}  \label{fig:nc-fixed}\end{figure}Vısledek testu konstantní ceny je na obrázku \ref{fig:nc-fixed}. Graf zobrazuje poèet uzlù prostorové mapy v èase.Na konkrétní hodnotì nezáleí, vısledky s nimo jsou obdobné\footnote{Jsou na pøiloeném CD}.Pokud je cena konstantní, v místnost s vìtším poètem pøedmìtù uzlù neustále pøibıvá. V místnosti s malım poètem pøedmìtù uzly mizí a jejich poèet klesá a k nule.Je tedy zøejmé, e cena nemùe bıt konstatní.\\\begin{definition}[Chtìnı poèet uzlù]Ze vzorce \eqref{formula:el-start-pocet-uzlu} je urèen poèáteèní poèet uzlù.Chtìnı poèet uzlù $n_{desired}$ je poèet uzlù, které by v prostoru mìly bıt, urèenı jen dle jeho velikosti.Je to konstanta, dvojnásobek poètu uzlù, které jsou do prostoru umístìny na zaèátku.\end{definition}Chtìli bychom, aby poèet uzlù mapy se po urèité dobì ustálil a aby tento poèet reflektoval èetnost vjemù.Definujme cenu vytvoøení uzlu $cost_{create}$ resp. zapomenutí uzlu $cost_{forget}$ jako funkci $n_{desired}$ a aktuálního poètu uzlù $n_{current}$.Pro jednudochost budou tyto funkce symetrické dle osy y, $cost_{create}$ bude rostoucí a $cost_{forget}$ klesající.\\Jsou urèeny vzorcem:\begin{equation} cost_{create}(n_{desired}, n_{current}) = 100 \times 3^{ \frac{n_{diff}}{50} }\label{formula:cost-create}\end{equation}resp.\begin{equation} cost_{delete}(n_{desired}, n_{current}) = 100 \times 3^{ - \frac{n_{diff}}{50} }\label{formula:cost-delete}\end{equation}\\$n_{diff}$ je promìnná vyjadøující rozdíl mezi aktuálním poètem a chtìnnım poètem uzlù dle vzorce:\begin{equation} n_{diff}(n_{desired}, n_{current}) = NodeCostCoef \times \frac{ n_{current} - n_{desired} }{ n_{desired} }\label{formula:forget-chance}\end{equation}\\?? OBR grafy funkcí ??\\\subsection{Hiearchie}Jedním z poadavkù na model vrstvy uzlù je, aby umìl vytváøet hiearchii uzlù. Model musí bıt schopen rozpoznat místa s vyšší hustotou uzlù.\\Uzlùm prostorové mapy pøidáme další vlastnost \emph{AGamount}, mnoství odpudivosti, které uzel za svoji existenci pocítil.Pøi vytvoøení uzlu je nastavena na nulu. V kadém kroku pøi poèítání odpudivıch sil pùsobících na uzel, je zvıšena o:\begin{equation} \Delta_{AGamount}(node) = \sum_{ 	\substack{		n \in nodes	}}  |odpudivost(n, node)|\label{formula:el-agamount}\end{equation}\\Mnoství odpudivosti v uzlu je sledováno a kdy pøekroèí limit danı modelem, parametr HLAGNeeded, algoritmus \ref{alg:hl-create} vytvoøí novı uzel vyšší úrovnì.\\\subsection{Vıslednı model}finalni alogoritmus EPV kadém kroku simulace je pro kadou stopu vjemu proveden algoritmus \ref{alg:ep-step-final}.\begin{algorithm}[h!]\caption{Jeden krok simulace pro bod energie}\label{alg:ep-step-final}\begin{algorithmic}[1]\State $p_{create} \gets$ pravdìpodobnost vzniku nového uzlu daná vzorcem \eqref{formula:el-pst-node-create} \label{alg:ep-step-create}\State $r \gets$ náhodné èíslo $r \in <0,1>$\If{$r < p_{create}$}	\State vytvoøení nového uzlu	\State vytvoøení vazby uzlu na pamìovou stopu bodu energie	\State $bod_{energy} \gets bod_{energy} - cost_{create}$ \label{alg:ep-step-cost}\EndIf\State $nodes \gets$ všechny uzly v okolí bodu energie\ForAll{$node \in nodes$}	\State $node_{xy} \gets node_{xy} + \Delta_{xy}$ dle vzorce \eqref{formula:el-ep-gravitace} \label{alg:ep-step-gravitace}\EndFor\ForAll{$node \in nodes$}	\State $\Delta \eta \gets \eta(node, bod)$ dle vzorce \eqref{formula:el-intenzita} \label{alg:ep-step-intenzita}	\State zvıšení intenzity vazby mezi $node$ a pamìovou stopou bodu o $\Delta \eta$\EndFor\State $bod_{energy} \gets bod_{energy} \times$ EPFadeCoef\If{$bod_{energy} <$ EPFadeLimit}	\State zrušení bodu energie\EndIf\end{algorithmic}\end{algorithm}\subsection{Sloitost algoritmù}