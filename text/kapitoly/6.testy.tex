\chapter{Vısledky testù modelu}

Tato kapitola obsahuje vısledky testù modelu.
V první podkapitole jsou testy finálního modelu prostorové mapy na rùznıch datech, v dalších jsou testy modelu s rùznımi hodnotami nìkterıch klíèovıch parametrù.
\\

Samotnı test je urèen testovacím svìtem\footnote{Pøehled všech testovacích místností je v pøíloze A.},
tedy místností a scénáøem a hodnotami parametrù.
\\


\section{Testy vısledného modelu} \label{chapter-test-final}
Model prostorové mapy popsanı v kapitole \ref{chapter-model} resp. \ref{chapter-model-el}
s vıchozím nastavením parametrù dle tabulky \ref{tab:param-el} v pøíloze B jsme otestovali v osmi rùznıch místnostech. 
Na obrázku \ref{fig:final-crazy}, \ref{fig:final-heapline} a \ref{fig:final-lobby} jsou vısledky ve tøech místnostech.
Vısledky v dalších místnostech, další vıstupní data a videa zachycující prùbìh testù jsou na pøiloeném CD.
\\


\begin{figure}[p]
  \centering
  \subfloat[Krok 1000]{\includegraphics[width=0.5\textwidth]{img/final/crazy1000.eps}}
  \subfloat[Krok 5000]{\includegraphics[width=0.5\textwidth]{img/final/crazy5000.eps}}
  \caption{Test vısledného modelu, místnost CrazyRoom.}
  \label{fig:final-crazy}
\end{figure}

\begin{figure}[p]
  \centering
  \subfloat[Krok 1000]{\includegraphics[width=0.5\textwidth]{img/final/heapline1000.eps}}
  \subfloat[Krok 5000]{\includegraphics[width=0.5\textwidth]{img/final/heapline5000.eps}}
  \caption{Test vısledného modelu, místnost HeapLineRoom.}
  \label{fig:final-heapline}
\end{figure}


\newpage

\begin{figure}[h!]
  \centering
  \subfloat[Krok 1000]{\includegraphics[width=0.5\textwidth]{img/final/lobby1000.eps}}
  \subfloat[Krok 5000]{\includegraphics[width=0.5\textwidth]{img/final/lobby5000.eps}}
  \caption{Test vısledného modelu, místnost Lobby.}
  \label{fig:final-lobby}
\end{figure}





\section{Vliv naplnìnosti} \label{chapter-test-ag}

V tomto testu ukáeme, jak dùleitou roli hraje vliv naplnìnosti pøi urèování vzájemné odpudivosti dvou uzlù ve vzorci \eqref{formula:el-odpudivost}.
Provedli jsme 5000 krokù simulace v místnostech EmptyRoom a FullRoom.
\\

V prvním testu nebyla naplnìnost uzlù pøi poèítání odpudivosti vùbec brána v úvahu.
Vısledek je na obrázku \ref{fig:usage-ag-no} a ukazuje, e v tomto pøípadì model rozmisuje uzly v prostoru témìø rovnomìrnì.
Z toho vyplıvá, e naplnìnost uzlu hraje v modelu vıznamnou roli.
Obrázky \ref{fig:usage-ag-0.5}, \ref{fig:usage-ag-0.8}, \ref{fig:usage-ag-1} ukazují vısledky testù pro rùzné hodnoty parametru \param{vliv naplnìnosti}.
\\

\begin{figure}[p]
  \centering
  \subfloat[EmptyRoom]{\includegraphics[width=0.5\textwidth]{img/usage/nousage-empty.eps}}
  \subfloat[FullRoom]{\includegraphics[width=0.5\textwidth]{img/usage/nousage-full.eps}}
  \caption{Test odpudivosti uzlù, jejich naplnìnost není brána v uvahu.}
  \label{fig:usage-ag-no}
\end{figure}

\begin{figure}[p]
  \centering
  \subfloat[EmptyRoom]{\includegraphics[width=0.5\textwidth]{img/usage/usage1-empty.eps}}
  \subfloat[FullRoom]{\includegraphics[width=0.5\textwidth]{img/usage/usage1-full.eps}}
  \caption{Test odpudivosti uzlù, vliv naplnìnosti $=1$.}
  \label{fig:usage-ag-1}
\end{figure}

\begin{figure}[p]
  \centering
  \subfloat[EmptyRoom]{\includegraphics[width=0.5\textwidth]{img/usage/usage0.8-empty.eps}}
  \subfloat[FullRoom]{\includegraphics[width=0.5\textwidth]{img/usage/usage0.8-full.eps}}
  \caption{Test odpudivosti uzlù, vliv naplnìnosti $=0,8$.}
  \label{fig:usage-ag-0.8}
\end{figure}

\begin{figure}[p]
  \centering
  \subfloat[EmptyRoom]{\includegraphics[width=0.5\textwidth]{img/usage/usage0.5-empty.eps}}
  \subfloat[FullRoom]{\includegraphics[width=0.5\textwidth]{img/usage/usage0.5-full.eps}}
  \caption{Test odpudivosti uzlù, vliv naplnìnosti $=0,5$.}
  \label{fig:usage-ag-0.5}
\end{figure}



\newpage

\section{Pøesnost mapy}
Jedním z objektivních kritérií modelu je pøesnost mapy, nakolik odpovídá realitì virtuálního svìta.

\begin{definition}[Nauèenost pøedmìtu]
V prùbìhu simulace agent vidí a pouívá pøedmìty a prostorová mapa dostává vjemy, které to odráejí.
Nauèenost pøedmìtu je vlastnost vyjadøující poèet a intenzitu vjemù daného pøedmìtu.
Na zaèátku simulace je rovna nule. V prùbìhu simulace pokadé, kdy je vytvoøen vjem pøedmìtu, je nauèenost pøedmìtu zvıšena o intenzitu vjemu.
Nauèenost pøedmìtu neklesá.
\end{definition}

Na konci simulace máme k dispozici mnoinu pøedmìtù, jejich polohu a nauèenost\footnote{Tyto informace jsou nezávislé na prostorové mapì.}.
Prostorová mapa má k dispozici mnoinu uzlù, jejich polohu a naplnìnost. Pøedpokládáme, e naplnìnost uzlù bude odráet nauèenost pøedmìtù.
Vizualizace dat pro místnost FullRoom je na obrázku \ref{fig:test-heatmap}, další jsou na pøiloeném CD.
Ukazuje, e náš pøepoklad je správnı, uzly prostorové mapy, resp. jejich naplnìnost se blíí nauèenosti pøedmìtù.
\\


\begin{figure}[h]
  \centering
  \subfloat[Nauèenost pøedmìtù]{\includegraphics[width=0.5\textwidth]{img/heatmap/predmet.eps}}
  \subfloat[Naplnìnost uzlù]{\includegraphics[width=0.5\textwidth]{img/heatmap/uzel.eps}}
  \caption{Vizualizace naplnìnosti uzlù a nauèenosti pøedmìtù.}
  \label{fig:test-heatmap}
\end{figure}

\newpage

Dalším monım mìøítkem je pøesnost zapamatovanıch poloh pøedmìtù.
V kadém kroku simulace mùeme urèit polohu, o ní se agent domnívá, e na ní pøedmìt je.
Tuto domnìlou polohu mùeme porovnat s skuteènou polohou pøedmìtu.
Na obrázcích \ref{fig:test-error1} a \ref{fig:test-error2} je zobrazen vıvoj rozdílu mezi realitou a agentovou prostorovou mapu v
èase\footnote{Vısledky v dalších místnostech jsou opìt na pøiloeném CD.}.
V tomto testu model uspìl jen v polovinì testovanıch dat.
\\


\begin{figure}[h]
  \centering
  \subfloat[Místnost Corridor]{\includegraphics[width=0.5\textwidth]{img/error/corridor.eps}}
  \subfloat[Místnost CrazyRoom]{\includegraphics[width=0.5\textwidth]{img/error/crazy.eps}}
  \caption{Prùmìrná chyba polohy pøedmìtù v èase.}
  \label{fig:test-error1}
\end{figure}

\begin{figure}[h]
  \centering
  \subfloat[Místnost FullRoom]{\includegraphics[width=0.5\textwidth]{img/error/full.eps}}
  \subfloat[Místnost HeapRoom]{\includegraphics[width=0.5\textwidth]{img/error/heap.eps}}
  \caption{Prùmìrná chyba polohy pøedmìtù v èase.}
  \label{fig:test-error2}
\end{figure}

\newpage

\section{Test limitù míst}
V kapitole \ref{chapter-place-detect} byl popsán mechanismus vytváøení míst.
Model prostorové mapy je tak schopen rozpoznat oblasti s vyšší hustotou uzlù a vytvoøit v takové oblasti místo.
V tomto testu jsme se rozhodli vyzkoušet vliv parametrù \param{rychlost klesání $\varrho$}, \param{limit vzniku podmísta} a \param{limit zapomenutí místa}.
Test jsme provedli s nastavením parametrù tak, aby došlo k vytvoøení více míst, jejich hodnoty jsou v tabulce \ref{tab:test-mist}, test mìl 4000 krokù simulace.
\\

\begin{table}[h!]
\begin{center}
\begin{tabular}{lcc}\toprule[0.5pt]

Parametr & Vıchozí hodnota & Testovaná hodnota \\
\midrule[0.2pt]

ELAGFadeOut & 0,1 & 0,05 \\

PlacesAGNeeded & 1500 & 1000 \\

PlacesAGMin & 500 & 300 \\

\bottomrule[0.5pt]
\end{tabular}
\end{center}
\centering
\caption{Hodnoty parametrù testu}
\label{tab:test-mist}
\end{table}

Vısledky testu s vıchozími hodnotami parametrù jsou na obrázku \ref{fig:test-places-ll}, vısledky testu se zmìnìnımi parametry jsou na obrázku \ref{fig:test-places-lh}.
Je vidìt, e zmìna testovanıch parametrù zpùsobila vznik více míst. I v témìø prázdné místnosti vznikla tøi místa.
\\

Vedlejším efektem však bylo vytvoøení míst i tam, kde jsme je neoèekávali a nechtìli.
Zvıraznìná místa na obrázku \ref{fig:test-places-lh-heap} nevznikla pøímo díky hustotì uzlù.
Ke svému vzniku spotøebovala mnoství odpudivosti nahromadìné v uzlech v tìsné blízkosti jinıch míst.
\\


\begin{figure}[p]
  \centering
  \subfloat[EmptyRoom]{\includegraphics[width=0.5\textwidth]{img/places/lh-empty.eps}}
  \subfloat[HeapRoom]{\includegraphics[width=0.5\textwidth]{img/places/lh-heap.eps}}
  \caption{Test vytváøení míst, vıchozí hodnoty parametrù.}
  \label{fig:test-places-ll}
\end{figure}

\begin{figure}[p]
  \centering
  \subfloat[EmptyRoom]{\includegraphics[width=0.5\textwidth]{img/places/ll-empty.eps}}
  \subfloat[HeapRoom]{\label{fig:test-places-lh-heap}\includegraphics[width=0.5\textwidth]{img/places/ll-heap.eps}}
  \caption{Test vytváøení míst, zmìnìné hodnoty parametrù.}
  \label{fig:test-places-lh}
\end{figure}




\newpage

\section{Test dynamického svìta}
Model prostorové mapy je vytvoøen tak, aby se dokázal pøizpùsobit mìnícímu se prostøedí.
Provedli jsme test v místnosti SwitchRoom, kterou jsme navrhli právì pro tento úèel.
V místnosti dojde ke dvìma zmìnám, v kroku 1500 je odebrána èást pøedmìtù a v kroku 4000 je nìkolik z nich vráceno zpìt a vytvoøeno nìkolik
novıch\footnote{Místnost SwitchRoom a její zmìny jsou zobrazeny v pøíloze A}.
\\

Vısledek testu je na obrázcích \ref{fig:test-dyn-nc} a \ref{fig:test-dyn}. Je na nich vidìt, e mapa se skuteènì pøizpùsobila novım pøedmìtùm
pøidanım v kroku 4000 v dolním pravém rohu a brzy tam vzniklo místo.
Poèet uzlù mapy také zareagoval na zmìnu poètu pøedmìtù, krátce po kroku 1500 pøestal rùst, pozdìji zaèal zvolna klesat.
Kdy byly pøidány nové pøedmìty, poèet uzlù zaèal pozvolna stoupat.
Prùbìh testu je lépe vidìt na videu, které je na pøiloeném CD.
\\

\begin{figure}[h!]
  \centering
  \includegraphics[width=0.9\textwidth]{img/dyn/nc.eps}
  \caption{Poèet uzlù prostorové mapy v èase, testovací místnost SwitchRoom.}
  \label{fig:test-dyn-nc}
\end{figure}

\begin{figure}[!h]
  \centering
  \subfloat[Krok 4001]{\includegraphics[width=0.5\textwidth]{img/dyn/step4001.eps}}
  \subfloat[Krok 4400]{\includegraphics[width=0.5\textwidth]{img/dyn/step4400.eps}}
  \caption{Test dynamického svìta, v kroku 4000 jsou pøidány pøedmìty do pravého dolního rohu, v kroku 4400 tam ji je místo.}
  \label{fig:test-dyn}
\end{figure}