\section{Pamìt na pøedmìty}

Pamì na pøedmìty øeší ukládání objektù (a potencionálnì dalších informací) k uzlùm.
Tedy ukládá informace typu "objekt XY je v uzlu n42 s intenzitou 5,2". Pamì na pøedmìty vychází z práce Tomáše Korenka [literatura-korenko].
\\

Pamì nepracuje pøímo s reálnımi pøedmìty, ale vytváøí si jejich kopie, \emph{pamìové stopy pøedmìtù}.
Pamìová stopa je reprezentace reálneho pøedmìtu v agentovì dlouhodobé pamìti, prostorové mapì.
Je to trojice \emph{$<$pøedmìt, intenzita, poloha$>$}, kde pøedmìt je odkaz na reálnı pøedmìt; intenzita urèuje, jak moc si agent tento pøedmìt pamatuje
a poloha jsou souøadnice, na kterıch se agent domnívá, e pøedmìt je.
Pro kadı reálnı pøedmìt má pamì nejvıše jednu pamìovou stopu.
\\

Mezi pamìovımi stopami pøedmìtù a uzly mapy je asociativní sí, která se vytváøí v prùbìhu simulace, dle toho, jak agent vnímá pøedmìty kolem sebe.
Asociativní sí je mnoina trojic \emph{$<$uzel, stopa, intenzita$>$}, tedy vazeb mezi pamìovımi stopami a uzly prostorové mapy, \(intenzita \in \mathbb{R}\).
\\

\begin{table}[h!]
\begin{center}
\begin{tabular}{|l|p{6cm}|}\hline
ObjectNoticed & agent vidí pøedmìt, kterı minulı krok simulace nevidìl \\
\hline
ObjectNoticedAgain & agent vidí pøedmìt, kterı vidìl ji pøedchozí krok simulace \\
\hline
ObjectFound & agent nalezl pøedmìt jako vısledek chytré akce LookUpInMemory \\
\hline
ObjectNotFound & agent nenalezl pøedmìt tam, kde ho hledal pøi chytré akce LookUpInMemory \\
\hline
ObjectUsed & agent pouil pøedmìt k provedení èinnosti \\
\hline
\end{tabular}\\
\end{center}
\centering
\caption{Atomické akce}
\label{tab:typy-vjemu}
\end{table}

Pamìti je v kadém kroku pøedloena mnoina vjemù (mùe bıt prázdná). Vjem je trojice (pøedmìt, poloha, intenzita).
Vjem má svùj typ, danı událostí, kterou byl vyvolán, jejich pøehled je v tabulce \ref{tab:typy-vjemu}.
Kadı typ má urèenı koeficient, kterım je vynásobena intenzita vjemu pøed jeho zpracováním prostorovou mapou, tyto koeficienty jsou parametry modelu.
\\


Proces zpracování vjemu prostorovou mapou je shrnut v algoritmu \ref{alg:zpracovani-vjemu}.
V prvním kroku je urèena pamìová stopa uchovávající informaci o pøedmìtu. Pokud není nalezena, je vytvoøena.
\\

\begin{algorithm}[h!]
\caption{Zpracování vjemu pamìtí na pøedmìty}
\label{alg:zpracovani-vjemu}
\begin{algorithmic}[1]
\State urèení pamìové stopy pøedmìtu
\State zvıšení intenzity pamìové stopy o intenzitu vjemu
\State $nodes\gets$ všechny uzly, do jejich okolí vjem padl
\ForAll{$n \in nodes$}
	\State $\Delta \eta \gets \eta(n, vjem)$ dle vzorce \ref{formula:intenzita-vazby} \label{alg:spacemap-intensity}
	\State zvıšení intenzity vazby mezi pamìovou stopou a uzlem $n$ o $\Delta \eta$
\EndFor
\State vjem je pøedán vrstvì uzlù k dalšímu zpracování
\end{algorithmic}
\end{algorithm}

V kroku \ref{alg:spacemap-intensity} je urèena intenzita o kterou bude zvıšena vazba mezi pamìovou stopou a uzlem dle vzorce:

\begin{equation} 
\Delta \eta(node, vjem) = \eta(vjem) \times \frac{ norm( dist(node, vjem) ) }
{\sum_{\substack{
   n \in nodes
  }}
  norm( dist(n, vjem) )
}
\label{formula:intenzita-vazby}
\end{equation}
\\

kde \emph{nodes} je mnoina všech uzlù, do jejich okolí vjem padl a $dist$ je vzdálenost uzlu od polohy vjemu.
Funkce $norm$ je libovolná klesající funkce mající obor hodnot $<0,1>$, napø. nepøímá úmìra $norm(x) = 1/max(1,x)$ èi Gaussova funkce.
Èást algoritmu \ref{alg:zpracovani-vjemu} mùe bıt provádìna v rámci vrstvy uzlù, napø. v modelu Energy Layer.
\\

Prostorová mapa je schopna øíci, kde se nacházejí pøedmìty, které agent pøed tím vidìl. Tato informace je uloena v døíve zmínìné asociativní síti.
Èím blíe je pøedmìt nìjakému uzlu mapy, tím vyšší je intenzita vazby mezi nimi.
Kdy agent hledá pøedmìt mající nìjakou affordanci, provede se proces popsanı v \ref{alg:vzpomenuti}. V kroku 2 je spoèítána poloha pøedmìtu z informací uloenıch v asociativní síti.
Poloha pøedmìtu je váenı centroid všech uzlù, které mají vazbu na pamìovou stopu, váhou je intenzita vazeb.
\\

\begin{algorithm}[h!]
\caption{Vzpomenutí si na pøedmìt}
\label{alg:vzpomenuti}
\begin{algorithmic}[1]
\State Vybrání pamìové stopy s nejvyšší intenzitou, která má poadovanou affordanci
\State Aktualizace informace o poloze pøedmìtu v pamìové stopì
\State Pamìová stopa je pøedána pamìové èásti krátkodobé pamìti, která z ní vytvoøí pamìového fantoma
\end{algorithmic}
\end{algorithm}


V kadém kroku simulace je sníena intenzita pamìovıch stop o MemObjIntensityFadeOut a
intenzita všech vazeb mezi pamìovımi stopami a uzly prostorové mapy o LinkMemObjToNodeFadeOut.
\\
