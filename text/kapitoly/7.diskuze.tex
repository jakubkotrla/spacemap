\chapter{Diskuse}
Model prostorové mapy popsanı v kapitole \ref{chapter-model} resp. \ref{chapter-model-el} splòuje základní poadavky, které jsme na nìj kladli.
V prùbìhu jeho testování a vytváøení se však objevila celá øada monıch rozšíøení a vylepšení.
Nìkterá z nich jsou popsána v této kapitole.
\\

\section{Pøitalivost stop vjemu}
Pokud je v místnosti oblast, kde je poblí sebe více pøedmìtù, prostorová mapa v ní vytvoøí více uzlù.
Pokud však budou mít pøedmìty nízkou aktraktivitu, napø. $^1/_{10}$ vıchozí atraktivity, nedojde k vzniku novıch uzlù.
Poèáteèní intenzita stop vjemu vytváøenıch v této oblasti bude pøílis malá, ne aby pokryla rostoucí cenu uzlu.
Pøestoe v oblasti jich bude hodnì, ádná z nich nebude dost intenzivní.
\\

Pokud èlovìk vidí hromadu malıch nezajímavıch vìcí, nezapamatuje si jednotlivé vìci, zapamatuje si však fakt, e v dané oblasti byla \uv{velká hromada nìèeho}.
Øešením by bylo pøidat do modelu pøitalivost stop vjemu. Lze ji chápat jako shlukování vjemù, které jsou blízko u sebe.
Síla pøitalivosti by mìla bıt nepøímo úmìrná intenzitì stopy vjemu, budou se tak shlukovat pouze vjemy s malou intenzitou.
Také ochota stopy mìnit svou polohu, tedy velikost zmìny polohy, by mìla bıt nepøímo úmìrná její intenzitì.
Vısledkem bude, e slabší vjemy budou pøitahovány k silnìjším.
\\

% ?? ToDo ukazat/overit na prikladu na prikladu, ze to tak je.

\section{Adaptivní odpudivost}
V pøedstaveném modelu je vzájemná odpudivost uzlù závislá pouze na jejich vzdálenosti a naplnìnosti.
Je dále ovlivnìna parametry modelu, které jsou však v prùbìhu celé simulace konstantní.
\\

Jedna z moností, jak zlepšit rozloení uzlù v prostoru, je mìnit parametry ovlivòující odpudivost,
v prùbìhu simulace, pøedevším \param{sílu odpudivosti} a \param{dosah odpudivosti}.
Parametry by se mohly mìnit podle aktuální hustoty uzlù, která se odráí v mnoství odpudivosti.
Dalším øešením by bylo pøidat je do vıpoètu odpudivosti,
tím by parametry pøestaly bıt stejné pro všechny uzly a odpudivost uzlù by se tak pøizpùsobovala lokální situaci.
\\


\section{Sjednocení stopy vjemu a uzlu}
V pøedstaveném modelu jsou dva podobné objekty: stopa vjemu a uzel prostorové mapy.
Na stopu vjemu lze nahlíet jako na doèasnı uzel mapy, kterı má danou svou ivotnost.
Souèasnì lze nahlíet na uzel mapy jako na trvalejší stopu vjemu.
Stopa vjemu a uzel jsou tedy jen dva rùzné stupnì tého typu objektu, stopa vjemu je uzel nultého stupnì.
\\

Model lze rozšíøit o další stupnì. Uzly by vytváøely další uzly, které by mìly ještì trvalejší charakter.
Stupeò uzlu by urèoval jeho trvalost, ochotu se pohybovat a míru, s jakou vytváøí další uzly vyššího stupnì.
Úplnım zobecnìním modelu by byla zmìna stupnì uzlu z diskrétní velièiny na spojitou. Mapa by tak obsahovala mnoho uzlù rùzného stupnì.
\\



\section{Zapomínání}
Model obsahuje nìkolik mechanismù pro zapomínání:

\begin{CompactItemize}
\item sniování intenzit pamìovıch stop a vazeb mezi stopou a uzlem
\item slábnutí a zmizení stop vjemu
\item klesání naplnìnosti uzlu
\item klesání mnoství odpudivosti uzlu
\item zapomínání uzlù
\item klesání intenzity místa
\end{CompactItemize}

Zapomínání uzlù je moné rozšíøit nìkolika zpùsoby.
Cenu vytvoøení a zapomenutí uzlu je moné skládat z více exponenciel, aby bylo dosaeno pozvolnìjšího prùbìhu funkce a dalšího zpomalení zapomínání uzlù.
Dále je moné pøi zapomínání uzlù brát v potaz jejich naplnìnost. 
Zapomenutí uzlù s rùznou naplnìností by nemìlo mít stejnou cenu zapomenutí uzlu $cost_forget$, uzel s vyšší naplnìností je pro mapu dùleitìjší.
To se mùe promítnout do sniování energie na zapomínání, je bude sniována v závislosti na naplnìnosti uzlu, kterı byl zapomenut.
Také samotnı vıbìr uzlu, kterı bude zapomenut, mùe bıt ovlivnìn jejich naplnìností.
\\

Slábnutí a klesání rùznıch vlastností uzlù, vazeb a míst je v pøedstaveném modelu lineární, nezávisí na aktuální hodnotì vlastnosti.
Model by bylo vhodné rozšíøit, aby rychlost klesání závisela na její aktuální hodnotì.
Pokud je hodnota vysoká, klesá rychleji, pokud se hodnota blíí k nule, klesá èím dál pomaleji.
\\

Model øeší zapomínání pouze za relativnì krátkou dobu.
Pøeneseme-li mìøítko èasu modelu, tj. kroky simulace, do reálného svìta, je vidìt, e model vyhovuje pro dobu trvající øádovì jednotky a desítky tıdnù.
Pokud by model mìl uspokojivì øešit zapomínání v øádu let, bylo vhodné rozšíøit intezitu vjemu do komplexnìjší velièiny,
napø. pøidat mechanismy pracující s emocemi.
\\



\section{Rozšíøení uzlu a místa}
Do uzlu je v modelu ukládána pouze informace o poloze pøedmìtù.
Uzly lze však vyuít i k uchování dalších informací, napø. které èinnosti poblí nich agent provádìl.
Vznikla by asociativní sí vazeb mezi èinnostmi a uzly. Jinım øešením by bylo vytváøet více map, pro kadı typ uchovávané informace jednu.
\\

Ukládané informace pak mohou bıt propagovány z uzlù do míst a z nich do nadøazenıch míst.
Agent by pak byl schopen urèit nejèastìjší èinnosti provádìné v urèité místì a vytvoøit si tak pøedstavu o jeho funkènosti,
napø: místo, kde se nejèastìji jí a pøipravuje jídlo, oznaèí jako místo k tomu urèené.
Pokud bychom mu dodali dostatek informací, bude schopen jej oznaèit slovem \emph{jídelna} èi \emph{kuchynì}.
K tomu úèelu by bylo tøeba vytvoøit hierachii afordancí èi je nìjak jinak kategorizovat.
\\

Model byl vytvoøen v prostøedí svìta jen s jedním agentem.
Pokud by svìt obsahoval více agentù, objevily by se další informace, které by bylo moné ukládat,
napø. kde se agent setkal s jinım konkrétním agentem èi co vidìl dìlat ostatní agenty.
Pokud by spolu agenti komunikovali, mohli by si pøedávat informace o poloze pøedmìtù.
Taková informace je pak z hlediska modelu prostorové mapy jen další typ vjemu, jeho intenzita by závisela napø. na dùvìryhodnosti agenta.
Celı proces pøedání informace o poloze pøedmìtu agentem $a_1$ agentovi $a_2$ si pak lze pøedstavit takto:
\begin{CompactItemize}
\item agent $a_1$ si vybaví pamìovou stopu a vytvoøí si pamìového fantoma
\item pamìovı fantom je pøedána agentovi $a_2$
\item agent $a_2$ vytvoøí na základì pamìového fantoma vjem, jeho intenzita bude odvozena z intenzity pamìové stopy agenta $a_1$ a dalších faktorù
\item prostorová mapa agenta $a_2$ zpracuje vjem
\end{CompactItemize}


Uloenou pozici objektu\footnote{pamìovou stopy v prostorové mapì agenta $a_2$}
by bylo vhodné obohatit o informaci, e tuto polohu se agent dozvìdìl od jiného agenta a od kterého.
Zde je moné model dále obohacovat, agent mùe napø. po èase zapomenout, kdo mu poloze pøedmìtu sdìlil.
\\




\section{Rozšíøení modelu pro sloitìjší svìty} \label{chapter-complex-space}
Model je navren pro velmi jednoduchı svìt obsahující pouze jednu 2D místnost.
Tato kapitola pøedstavuje rozšíøení modelu pro svìt obsahující více místností, které jsou 3D.
\\

Rozšíøení modelu do 3D je pøímoèaré. Všechny algoritmy a vzorce pracují nezávisle na dimenzi svìta.
Poloha objektù prostorové mapy bude urèena tøemi souøadnicemi $<x,y,z>$. Vzdálenost mezi objekty bude euklidovská:
\begin{equation} 
dist_{3D}(a,b) = \sqrt{  (a_x-b_x)^2 + (a_y-b_y)^2 + (a_z-b_z)^2}.
\label{formula:vzdalenost-3D}
\end{equation}
Místnost mùe bıt obecnı mnohoúhelník. Model potøebuje od vnìjšího svìta pouze následující rozhraní: 
\begin{CompactItemize}
\item urèit obsah mnohostìnu
\item testovat náleení bodu do mnohostìnu
\item urèit prùseèík úseèky a stìny
\item urèit viditelnost pøedmìtu\footnote{Zorná pole, popsaná v kapitole \ref{chapter-agent} jako kruhové vıseèe, budou kuely.}
\end{CompactItemize}

Implementace tìchto funkcí bude klást vıraznì vìtší nároky na vıpoèetní vıkon, ne model v 2D svìtì.
Pro tyto úèely by bylo vhodné vyuít hotové øešení, napø. nìjakı volnì dostupnı herní èi fyzikální engine.
\\


Svìt kolem nás není omezen na jednu uzavøenou místnost, skládá se z mnoha prostorù, které se dìlí na menší a menší.
Svìt kolem nás mùeme chápat jako hiearchii takovıch prostorù, i kdy hranice mezi nimi nejsou vdy jasnì urèené.
Napø. dùm se dìlí na podlaí, ta dále na byty, které jsou sloeny z nìkolika místností.
Model je moné rozšíøit tak, aby dokázal pracovat ve svìtì urèeném jako hiearchie prostorù.
\\

\begin{definition}[Hiearchickı svìt]
Svìt se skládá z prostorù. Kadı prostor je obecnı mnohoúhelník, rozdìlenı na další podprostory. Tím je vytvoøena hiearchie prostorù.
Koøen stromu této hiearchie je samotnı svìt, listy stromu jsou prostory, které ji nemá smysl dále dìlit, napø. malá uzavøená místnost, lednièka èi police.
Podprostory v prostoru jsou chápány jako pøedmìty, napø. lednièka je prostor obsahující pøedmìty, ale z hlediska místnosti je pouze pøedmìtem.
\end{definition}

Èást prostorové mapy \emph{pamì na pøedmìty} pracuje nezávisle na velikosti svìta.
\emph{Vrstva uzlù} je na nìm závislá, proto si mapa vytvoøí novou pro kadı prostor.
V døíve uvedeném pøíkladu domu by kadá místnost, byt i podlaí mìly vlastní \emph{vrstvu uzlù}.
Hiearchii svìta musí model dostat k dispozici. \footnote{
 Model by si tuto hiearchii mohl konstruovat sám obdobnım zpùsobem, jakım si vytváøí místa v kapitole \ref{chapter-place-detect}.
 Pak by mìl pouze jednu velmi rozsáhlou vrstvu uzlù.
 To by nebylo vhodné z hlediska nároku na vıpoèetní vıkon. Navíc lidé tuto hiearchii vnímají okamitì, nemusejí se ji zdlouhavì uèit.
}\\

To navíc umoòuje parametrizovat vrstvù uzlù na míru konkrétní místnosti, dokonce pouít jiné implementace a urèité modifikace modelu.
Napø. malá místnost plná pøedmìtù (sklad) a velká témìø prázdná místnost (hala) mohou mít zcela jiné nastavení parametrù, jako je hustota mapy èi cena uzlu.
\\



\section{Další moná pouití modelu}
Model je navren jako èást episodické pamìti virtuálního agenta. Není však závislı na jeho architektuøe.
Má urèité poadavky na geometrii virtuální svìta, pro kterı vytváøí prostorovou mapu:

\begin{CompactItemize}
\item svìt je 2D polygon, kterı se vejde do ètverce pøiblinì 100$\times$100
\item pøedmìty nemají velikost, jsou reprezentovány svım støedem
\end{CompactItemize}

Tyto poadavky však nejsou pro mnoho úloh zásadním zpùsobem omezující.
Model je moné pouít i pro jiné úèely.
Struènì øeèeno, model umí ukládat informaci o rozloení pøedmìtù v omezeném prostoru na základì postupnıch informací o jejich poloze.
Dále umí urèit \emph{místa}, tj. oblasti, kde je více pøedmìtù.
\\

Model by bylo moné pouít napø. pro vytvoøení poèítaèového protivníka do hry pexeso.
V kadém kole hry agent vidí dvojici karet - dva vjemy pøedmìtù.
Díky tomu, e vjemy mají intenzitu, mùe model brát v potaz i fakt, e agent se na karty dívá z urèitého uzlu a vzdálenosti.
Atraktivita pøedmìtu mùe bıt pouita pro simulaci rozeznatelností obrázku na kartì.
Jinou atraktivitu bude mít karta s obrázkem èerveného vykøièníku a jinou karta s ilustrací v nevıraznıch pastelovıch barvách.
Kdy si bude agent vybavovat polohu karty v páru, model urèí její polohu s nepøesností odpovídající poètu otoèení hledané karty.
\\

Další úlohou, kde by bylo moné model pouít, je uèení se rozloení kláves na klávesnici virtuálním agentem a simulace jeho pøeklepù.
Psaním písmen, tedy pouíváním kláves, by se model rozloení uèil a v prùbìhu èasu by frekvence pøeklepù klesala.
\\